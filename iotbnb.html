<script type="text/javascript">
    function oneditprepare() {
        //do nothing
    }
    RED.nodes.registerType('iotbnb',{
        category: 'IoT standard',
        color: '#00AFF0',
        defaults: {
            latitude: {value:""},
            longitude: {value:""},
            radius: {value:""},
            name: {value:""},
            operations: {value:""},
            type1: {value:"all"},
            price: {value:""},
            reputation: {value:""},
            service: {value:""},
        },
        inputs:1,
        outputs:1,
        icon: "feed.png",
        label: function() {
            return this.name||"iotbnb";
        },
        oneditprepare: function() {
            var oper = $("#node-input-operations").val();
            //var oper_readTypes = $("#node-input-readTypes").val();
            if (oper == undefined) {
                $(".node-input-Geo1").hide();
                $(".node-input-Geo2").hide();
                $(".node-input-Geo3").hide();
                $(".node-input-type1").hide();
                $(".node-input-price").hide();
                $(".node-input-reputation").hide();
                $(".node-input-service").hide();
            }
        },
        /*oneditsave: function() {
            var type = $("#node-input-readTypes").val();
            if (type == "subscriboooe") {
                console.log("totoooo");
            }
        },*/
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
        //oneditprepare: oneditprepare
    });
</script>

<script type="text/x-red" data-template-name="iotbnb">
    <!--<div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">-->
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" data-i18n="Name">
    </div>
    <div class="form-row">
        <label for="node-input-operations"><i class="fa fa-envelope"></i> Interface</label>
        <select type="text" id="node-input-operations" placeholder="Toto">
            <option value="getAllServices">getAllServices</option>
            <option value="searchServices">searchServices</option>
            <option value="getServiceAccessInformation">getServiceAccessInformation</option>
        </select>
    </div>
    <div class="form-row node-input-Geo1">
        <label for="node-input-Geo1"><i class="fa fa-map-marker"></i> Geo-Filter</label> <span data-i18n="type1"></span></label>
        <input type="text" id="node-input-latitude" placeholder="Set latitude (by default: n/a, i.e. parameter not used)">
    </div>
     <div class="form-row node-input-Geo2">
        <label for="node-input-Geo2"> </label> <span data-i18n="type1"></span></label>
        <input type="text" id="node-input-longitude" placeholder="Set longitude (by default: n/a, i.e. parameter not used)">
    </div>
     <div class="form-row node-input-Geo3">
        <label for="node-input-Geo3"></label> <span data-i18n="type1"></span></label>
        <input type="text" id="node-input-radius" placeholder="Set a radius (by default: 100m)">
    </div>
    <div class="form-row node-input-type1">
        <label for="node-input-type1"><i class="fa fa-search"></i> Type</label> <span data-i18n="type1"></span></label>
        <input type="text" id="node-input-type1" placeholder="Set an INSPIRE theme if desired (by default: all)">
    </div>
    <div class="form-row node-input-price">
        <label for="node-input-price"><i class="fa fa-btc"></i> Price</label> <span data-i18n="price"></span></label>
        <input type="text" id="node-input-price" placeholder="Set the price if you want to buy at a specific price (by default: 0)">
    </div>
    <div class="form-row node-input-reputation">
        <label for="node-input-reputation"><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star-o"></i><i class="fa fa-star-o"></i> Reputation</label> <span data-i18n="reputation"></span></label>
        <input type="text" id="node-input-reputation" placeholder="Set the reputation if desired (by default: all)">
    </div>
    <div class="form-row node-input-service">
        <label for="node-input-service"><i class="fa fa-search"></i> Service</label> <span data-i18n="service"></span></label>
        <input type="text" id="node-input-service" placeholder="Set a service">
    </div>

    <script>
        $("#node-input-operations").change(function() {
            var oper = $("#node-input-operations").val();
            if (oper == "getAllServices") {
                $(".node-input-Geo1").hide();
                $(".node-input-Geo2").hide();
                $(".node-input-Geo3").hide();
                $(".node-input-type1").hide();
                $(".node-input-price").hide();
                $(".node-input-reputation").hide();
                $(".node-input-service").hide();
            } else if (oper == "searchServices") {
                $(".node-input-Geo1").show();
                $(".node-input-Geo2").show();
                $(".node-input-Geo3").show();
                $(".node-input-type1").show();
                $(".node-input-price").show();
                $(".node-input-reputation").show();
                $(".node-input-service").hide();
            } 
            else if (oper == "getServiceAccessInformation") {
                $(".node-input-Geo1").hide();
                $(".node-input-Geo2").hide();
                $(".node-input-Geo3").hide();
                $(".node-input-type1").hide();
                $(".node-input-price").hide();
                $(".node-input-reputation").hide();
                $(".node-input-service").show();
            } 
        });
    </script>
</script>


<script type="text/x-red" data-help-name="iotbnb">
    <p>         operations= n.operations || msg.operations;
                latitude= n.latitude || msg.latitude;
                longitude= n.longitude || msg.longitude;
                radius= n.radius || msg.radius;
                price= n.price || msg.price;
                type1= n.type1 || msg.type1;
                reputation= n.reputation || msg.reputation;
                service= n.service || msg.service;
</script>
